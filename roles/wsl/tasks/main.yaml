- name: Install Packages
  become: true
  ansible.builtin.apt:
    name:
      - chromium-browser
      - fontconfig
    state: present

- name: Create .ssh Directory
  ansible.builtin.file:
    path: ~/.ssh
    state: directory
    mode: "0755"
- name: Move SSH Config
  ansible.builtin.copy:
    src: ssh_config
    dest: ~/.ssh/config
    mode: "0644"

- name: Enable sudo without Password
  become: true
  ansible.builtin.lineinfile:
    path: /etc/sudoers
    regexp: ^\%sudo
    line: "%sudo ALL=(ALL) NOPASSWD:ALL"
    mode: "0440"

- name: Get Current Dir Path
  ansible.builtin.command: pwd
  register: wsl_dotfiles_dir
  changed_when: false
- name: Get Ansible Path
  ansible.builtin.command: which ansible-playbook
  register: wsl_ansible_path
  changed_when: false
- name: Put WSL Config
  become: true
  ansible.builtin.template:
    src: wsl.conf.j2
    dest: /etc/wsl.conf
    mode: "0644"

- name: Copy Font Setting
  become: true
  ansible.builtin.copy:
    src: local.conf
    dest: /etc/fonts/local.conf
    mode: "0644"
- name: Enable Font Setting
  become: true
  ansible.builtin.command: fc-cache -fv
  changed_when: false
